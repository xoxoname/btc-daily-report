# modules/report.py

import requests
import datetime

def get_profit_report():
    try:
        res = requests.get("https://btc-daily-report.onrender.com/report")
        data = res.json()
        usdt_pnl = data["usdt_pnl"]
        krw_pnl = data["krw_pnl"]
        return f"ğŸ“ˆ ìˆ˜ìµ ë¦¬í¬íŠ¸\n\nì´ ìˆ˜ìµ: {usdt_pnl} USDT ({krw_pnl}ì›)"
    except:
        return "âŒ ìˆ˜ìµ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤."

def get_prediction_report():
    # ì˜ˆì¸¡ìš© ê°„ëµ ë¦¬í¬íŠ¸
    return "ğŸ“‰ ì˜ˆì¸¡ ë¦¬í¬íŠ¸\n\në¹„íŠ¸ì½”ì¸ì€ í˜„ì¬ ê¸°ìˆ ì  ì €í•­ì„  ê·¼ì ‘ ì¤‘ì…ë‹ˆë‹¤. ë‹¨ê¸° í•˜ë½ ê°€ëŠ¥ì„± 60%ë¡œ íŒë‹¨ë©ë‹ˆë‹¤."

def get_full_prediction_report():
    now = datetime.datetime.now().strftime("%Y-%m-%d %H:%M")
    return (
        f"ğŸ“Š GPT ì •ë°€ BTC ë§¤ë§¤ ë™í–¥ ë¦¬í¬íŠ¸\nğŸ•’ ë¶„ì„ ê¸°ì¤€: {now}\n\n"
        "- ì£¼ìš” ì‹œì¥ ì´ë²¤íŠ¸: ì—†ìŒ\n"
        "- ê¸°ìˆ ì  ë¶„ì„: RSI ê³¼ë§¤ìˆ˜, MACD ì•½ì„¸ ì „í™˜\n"
        "- ì‹¬ë¦¬/êµ¬ì¡° ë¶„ì„: ë¡± í¬ì§€ì…˜ ê³¼ë‹¤, ë¯¸ê²°ì œì•½ì • ì¦ê°€\n"
        "- í–¥í›„ 12ì‹œê°„ ì˜ˆì¸¡: ì•½ì¡°ì • ë˜ëŠ” íš¡ë³´ ê°€ëŠ¥ì„± ë†’ìŒ (í•˜ë½ 55%)\n"
        "- ì˜ˆì™¸ ê°ì§€ ì‹œìŠ¤í…œ: ì´ìƒ ì—†ìŒ\n"
        "- ì´ì „ ì˜ˆì¸¡ ê²€ì¦: ì˜¤ì „ 9ì‹œ ì˜ˆì¸¡ ì •í™•ë„ 82%\n\n"
        "ğŸ’¬ ë©˜íƒˆ ê´€ë¦¬: ì°¨ë¶„íˆ ë‹¤ìŒ ê¸°íšŒë¥¼ ê¸°ë‹¤ë¦¬ì„¸ìš”. ë§¤ë§¤ëŠ” í™•ë¥  ê²Œì„ì…ë‹ˆë‹¤.\n"
        "ğŸ’¸ ì˜¤ëŠ˜ ìˆ˜ìµì€ í¸ì˜ì  3ì‹œê°„ ì•Œë°”ì™€ ìœ ì‚¬í•©ë‹ˆë‹¤.\n"
    )
